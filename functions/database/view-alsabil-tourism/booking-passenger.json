{
  "children": [
    {
      "type": "Text?class=flexbox;text=data().counter;style:[fontSize=1.3rem;border=1px solid #ccc;borderRadius=.5rem .5rem 0 0;height=2rem;width=3rem;borderBottom=0;marginBottom=-1px;zIndex=1;backgroundColor=#fff]"
    },
    {
      "type": "View?class=vertical;style:[flex=1;gap=4rem;border=1px solid #ddd;borderRadius=0 1rem 1rem 1rem;padding=2rem]",
      "children": [
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Trip;style:[color=#888;fontSize=1.3rem;transition=.3s];hover.style.color=#444"
                    }
                  ],
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                },
                {
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Class;style:[color=#888;fontSize=1.3rem;transition=.3s];hover.style.color=#444"
                    }
                  ],
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                },
                {
                  "children": [
                    {
                      "type": "Text?class=pointer;text=--;style:[color=#888;fontSize=1.3rem;transition=.3s];hover.style.color=#444"
                    }
                  ],
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                },
                {
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Baggage;style:[color=#888;fontSize=1.3rem;transition=.3s];hover.style.color=#444"
                    }
                  ],
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Meal Included;style:[color=#888;fontSize=1.3rem;transition=.3s];hover.style.color=#444"
                    }
                  ]
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Base Fare;style:[color=#888;fontSize=1.3rem;transition=.3s;marginLeft=auto];hover.style.color=#444"
                    }
                  ]
                },
                {
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Taxes;style:[color=#888;fontSize=1.3rem;transition=.3s;marginLeft=auto];hover.style.color=#444"
                    }
                  ],
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Fees;style:[color=#888;fontSize=1.3rem;transition=.3s;marginLeft=auto];hover.style.color=#444"
                    }
                  ]
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]?!agent:().admin",
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Commission;style:[color=#888;fontSize=1.3rem;transition=.3s;marginLeft=auto];hover.style.color=#444"
                    }
                  ]
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Service Fees;style:[color=#888;fontSize=1.3rem;transition=.3s;marginLeft=auto];hover.style.color=#444"
                    }
                  ]
                },
                {
                  "children": [
                    {
                      "type": "Text?class=pointer;text=Payable;style:[color=#888;fontSize=1.3rem;transition=.3s;marginLeft=auto];hover.style.color=#444"
                    }
                  ],
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                }
              ],
              "type": "View?style:[gap=1rem;width=100%;display=grid;gridTemplateColumns=if():[!agent:().admin]:[1fr 1fr .5fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr]:[1fr 1fr .5fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr];borderRadius=.5rem;marginBottom=1rem]"
            },
            {
              "type": "View?class=vertical;style:[width=100%]",
              "children": [
                {
                  "children": [
                    {
                      "type": "View?style:[gap=1rem;width=100%;display=grid;gridTemplateColumns=if():[!agent:().admin]:[1fr 1fr .5fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr]:[1fr 1fr .5fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr];height=4rem;borderRadius=.5rem];booking-data:().booking-details.[parent().mapIndex].seats._():[().data=_.passengers-details.find():[counter=parent().parent().data().counter]]",
                      "children": [
                        {
                          "children": [
                            {
                              "type": "Text?class=flex;text=booking-data:().booking-details.[parent().parent().parent().mapIndex].():[departure-airport.slice():0:3+' - '+arrival-airport.slice():0:3].0;style:[fontSize=1.3rem]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex;text=booking-data:().booking-details.[parent().parent().parent().mapIndex].seats.find():[passengers-details.find():[counter=parent().parent().parent().parent().data().counter]].head-class;style:[fontSize=1.3rem]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex;text=booking-data:().booking-details.[parent().parent().parent().mapIndex].seats.find():[passengers-details.find():[counter=parent().parent().parent().parent().data().counter]].class;style:[fontSize=1.3rem]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                          "children": [
                            {
                              "type": "Text?class=flex;text=booking-data:().booking-details.[parent().parent().parent().mapIndex].seats.find():[passengers-details.find():[counter=parent().parent().parent().parent().data().counter]].baggage-kg;style:[fontSize=1.3rem]"
                            }
                          ]
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                          "children": [
                            {
                              "type": "Text?class=flex;text=if():[booking-data:().booking-details.[parent().parent().parent().mapIndex].seats.find():[passengers-details.find():[counter=parent().parent().parent().parent().data().counter]].meal-included]:Yes:No;style:[fontSize=1.3rem]"
                            }
                          ]
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex base-fare-passenger;text=data().base-fare-usd.round():2+'$';style:[fontSize=1.3rem;marginLeft=auto]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex taxes-passenger;data().taxes-usd=booking-data:().booking-details.[parent().parent().parent().mapIndex].taxes-usd.values().sum();text=data().taxes-usd.round():2+'$';style:[fontSize=1.3rem;marginLeft=auto]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex fees-passenger;data().fees-usd=booking-data:().booking-details.[parent().parent().parent().mapIndex].fees-usd.values().sum();text=data().fees-usd.round():2+'$';style:[fontSize=1.3rem;marginLeft=auto]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;flex=1;width=100%]"
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex commission-passenger;booking-data:().booking-details.[parent().parent().parent().mapIndex]._():[data().commission-usd=[_.total-commission-usd||0].divide():[_.total-passengers]||0];text=data().commission-usd.round():2+'$';style:[fontSize=1.3rem;marginLeft=auto]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]?!agent:().admin"
                        },
                        {
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                          "children": [
                            {
                              "type": "Text?class=flex additional-profit-passenger;booking-data:().booking-details.[parent().parent().parent().mapIndex]._():[data().additional-profit-usd=[_.total-additional-profit-usd||0].num().divide():[_.total-passengers]||0];text=data().additional-profit-usd.round():2+'$';style:[fontSize=1.3rem;marginLeft=auto]"
                            }
                          ]
                        },
                        {
                          "children": [
                            {
                              "type": "Text?class=flex total-passenger;data().total-usd=data().base-fare-usd+data().taxes-usd+data().fees-usd+data().additional-profit-usd;data().payable-usd=(data().total-usd)-if():[!agent:().admin]:[data().commission-usd]:0;text=if():[!agent:().admin]:[data().payable-usd.round():2]:[data().total-usd.round():2]+'$';style:[fontSize=1.3rem;marginLeft=auto]"
                            }
                          ],
                          "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                        }
                      ]
                    }
                  ],
                  "type": "[View]?class=vertical;style:[width=100%];data=range():0:[booking-data:().booking-details.len()];Data"
                }
              ]
            },
            {
              "type": "View?style:[gap=1rem;height=3.5rem;width=100%;display=grid;gridTemplateColumns=if():[!agent:().admin]:[1fr 1fr .5fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr]:[1fr 1fr .5fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr];borderRadius=.5rem;borderTop=1px solid #ddd]",
              "children": [
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                  "children": [
                    {
                      "controls": [
                        {
                          "event": "loaded?().base-fare-usd=parent().parent().parent().className():base-fare-passenger.():[txt().slice():0:[-1].num()].sum();txt()=().base-fare-usd.round():2+'$'"
                        }
                      ],
                      "type": "Text?class=pointer end-base-fare;text=;style:[color=#000;fontSize=1.3rem;transition=.3s;marginLeft=auto];hover.style.color=#444"
                    }
                  ]
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                  "children": [
                    {
                      "type": "Text?class=pointer end-taxes;text=;style:[color=#000;fontSize=1.3rem;transition=.3s;marginLeft=auto];hover.style.color=#444",
                      "controls": [
                        {
                          "event": "loaded?data().taxes-usd=parent().parent().parent().className():taxes-passenger.():[txt().slice():0:[-1].num()].sum();txt()=data().taxes-usd.round():2+'$'"
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]",
                  "children": [
                    {
                      "controls": [
                        {
                          "event": "loaded?data().fees-usd=parent().parent().parent().className():fees-passenger.():[txt().slice():0:[-1].num()].sum();txt()=data().fees-usd.round():2+'$'"
                        }
                      ],
                      "type": "Text?class=pointer end-fees;text=;style:[color=#000;fontSize=1.3rem;transition=.3s;marginLeft=auto];hover.style.color=#444"
                    }
                  ]
                },
                {
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]?!agent:().admin",
                  "children": [
                    {
                      "type": "Text?class=pointer end-commission;text=;style:[color=#000;fontSize=1.3rem;transition=.3s;marginLeft=auto];hover.style.color=#444",
                      "controls": [
                        {
                          "event": "loaded?data().commission-usd=parent().parent().parent().className():commission-passenger.():[txt().slice():0:[-1].num()].sum();txt()=data().commission-usd.round():2+'$'"
                        }
                      ]
                    }
                  ]
                },
                {
                  "children": [
                    {
                      "controls": [
                        {
                          "event": "loaded?data().additional-profit-usd=parent().parent().parent().className():additional-profit-passenger.():[txt().slice():0:[-1].num()].sum();txt()=data().additional-profit-usd.round():2+'$'"
                        }
                      ],
                      "type": "Text?class=pointer end-profit;text=;style:[color=#000;fontSize=1.3rem;transition=.3s;marginLeft=auto];hover.style.color=#444"
                    }
                  ],
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                },
                {
                  "children": [
                    {
                      "controls": [
                        {
                          "event": "loaded?data().payable-usd=parent().parent().parent().className():total-passenger.():[txt().slice():0:[-1].num()].sum();data().total-usd=if():[agent:().admin]:[data().payable-usd]:[[data().payable-usd]-[parent().parent().parent().className():commission-passenger.():[txt().slice():0:[-1].num()].sum()]];txt()=data().payable-usd.round():2+'$'"
                        }
                      ],
                      "type": "Text?class=pointer end-payable;text=;style:[color=#000;fontSize=1.3rem;transition=.3s;marginLeft=auto];hover.style.color=#444"
                    }
                  ],
                  "type": "View?class=flex align-center;style:[height=100%;flex=1]"
                }
              ]
            }
          ],
          "type": "View?class=vertical;style:[width=100%]"
        },
        {
          "children": [
            {
              "type": "View?style:[gap=1rem;width=100%;display=grid;gridTemplateColumns=1fr 1fr 1fr]",
              "children": [
                {
                  "type": "Input?label:[text=Age;location=outside;style.fontSize=1.3rem];if():[!data().age]:[data().age=ADT];path=age;readonly;clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem]"
                },
                {
                  "type": "Input?label:[text=Title;location=outside;style.fontSize=1.3rem];if():[!data().title]:[data().title='Mr.'];path=title;clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem];droplist.items=_array:'Mr.':'Mrs.':'Dr.';if():[booking-edit-readonly:()]:[droplist.readonly=true];droplist.item.style.fontSize=1.3rem",
                  "controls": [
                    {
                      "event": "click:droplist?if():[droplist-txt:()='Mrs.']:[parent().data().gender=F;next().input().txt()=F].elif():[droplist-txt:()='Mr.']:[parent().data().gender=M;next().input().txt()=M]"
                    }
                  ]
                },
                {
                  "type": "Input?label:[text=M/F;location=outside;style.fontSize=1.3rem];if():[!data().gender]:[data().gender=M];path=gender;clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem];droplist.items=_array:M:F;if():[)(:booking-edit-readonly]:[droplist.readonly=true];droplist.item.style.fontSize=1.3rem",
                  "controls": [
                    {
                      "event": "click:droplist?if():[droplist-txt:()='F']:[parent().data().title='Mrs.';prev().input().txt()='Mrs.'].elif():[droplist-txt:()='M']:[parent().data().title='Mr.';prev().input().txt()='Mr.']"
                    }
                  ]
                }
              ]
            },
            {
              "type": "Input?class=first-name;label:[text=First Name;location=outside;style.fontSize=1.3rem];path=first-name;clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem];if():[booking-edit-readonly:()]:[readonly=true]",
              "controls": [
                {
                  "event": "input?data()=data().uppercase();txt()=data()"
                }
              ]
            },
            {
              "type": "Input?label:[text=Last Name;location=outside;style.fontSize=1.3rem];path=last-name;clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem];class=last-name;if():[booking-edit-readonly:()]:[readonly=true]",
              "controls": [
                {
                  "event": "input?data()=data().uppercase();txt()=data()"
                }
              ]
            },
            {
              "controls": [
                {
                  "event": "change?data()=data().timestamp()"
                }
              ],
              "type": "Input?label:[text=DOB;location=outside;style.fontSize=1.3rem];input.type=date;path=dob;if():data():[input.value=data().toDateInputFormat()];clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem];if():[booking-edit-readonly:()]:[readonly=true]"
            },
            {
              "type": "Input?label:[text=Nationality;location=outside;style.fontSize=1.3rem];clearable;path=nationality;clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem];droplist.items='collections:().nationalities.nationalities';if():[)(:booking-edit-readonly]:[droplist.readonly=true];droplist.item.style.fontSize=1.3rem;droplist.searchable;if():[booking-edit-readonly:()]:[readonly=true]"
            },
            {
              "type": "Input?label:[text=Passport #;location=outside;style.fontSize=1.3rem];path=passport-number;clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem];if():[booking-edit-readonly:()]:[readonly=true]"
            },
            {
              "type": "Input?label:[text=Passport Issuer;location=outside;style.fontSize=1.3rem];clearable;path=passport-issuer;clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem];droplist.items=')(:collections.countries.countries';if():[)(:booking-edit-readonly]:[droplist.readonly=true];droplist.item.style.fontSize=1.3rem;droplist.searchable"
            },
            {
              "controls": [
                {
                  "event": "change?data()=data().timestamp()"
                }
              ],
              "type": "Input?label:[text=Passport Expiry;location=outside;style.fontSize=1.3rem];input.type=date;path=passport-expiry-date;input.min=todayStart().toDateInputFormat();if():data():[input.value=data().toDateInputFormat()];clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem];if():[booking-edit-readonly:()]:[readonly=true]"
            },
            {
              "type": "Input?label:[text=Contact #;location=outside;style.fontSize=1.3rem];path=contact-number;clicked.style.border=2px solid #0080ff;style:[width=100%;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem];if():[booking-edit-readonly:()]:[readonly=true]?data().age=ADT"
            },
            {
              "type": "Input?label:[text=Email;location=outside;style.fontSize=1.3rem];container.style:[height=5.6rem;position=relative];path=email;clicked.style.border=2px solid #0080ff;style:[position=absolute;left=0;bottom=0;minWidth=15vw;width=fit-content;height=3.5rem;borderRadius=.5rem;fontSize=1.3rem];if():[booking-edit-readonly:()]:[readonly=true]?data().age=ADT"
            },
            {
              "type": "View?class=flexbox pointer;tooltip.text=add infant;style:[borderRadius=.5rem;border=1px solid #ddd;height=3rem;width=3rem;backgroundColor=#fff;transition=.2s;position=absolute;right=0;bottom=0];hover.style:[backgroundColor=#f6f6f6;border=1px solid #bbb];mouseenter.1stChild().style().color=#888;mouseleave.1stChild().style().color=#aaa?data().age=ADT",
              "children": [
                {
                  "type": "Icon?name=add;google.outlined;style:[fontSize=2rem;color=#aaa;transition=.2s]"
                }
              ],
              "controls": [
                {
                  "event": "click?data().infants=data().infants||_list;data().infants.push():[_map:age:INF:title:'Mr.':gender:M]",
                  "actions": "wait():insert?insert.view=parent().parent().children.1;insert.path=path().push():[_list:infants:[data().infants.lastIndex()]];insert.id=parent().parent()"
                }
              ]
            },
            {
              "children": [
                {
                  "type": "Icon?name=remove;google.outlined;style:[fontSize=2rem;color=#aaa;transition=.2s]"
                }
              ],
              "controls": [
                {
                  "event": "click?parent().rem()"
                }
              ],
              "type": "View?class=flexbox pointer;tooltip.text=remove infant;style:[borderRadius=.5rem;border=1px solid #ddd;height=3rem;width=3rem;backgroundColor=#fff;transition=.2s;position=absolute;right=0;bottom=0];hover.style:[backgroundColor=#f6f6f6;border=1px solid #bbb];mouseenter.1stChild().style().color=#888;mouseleave.1stChild().style().color=#aaa?data().age=INF"
            }
          ],
          "type": "View?style:[gap=1rem;width=100%;display=grid;gridTemplateColumns=1fr 1fr 1fr 1fr 1fr 1fr;position=relative];data().status=Booked",
          "controls": [
            {
              "watch": "data()?booking-data:().booking-details.slice():1.():[seats._():[().myIndex=_.passengers-details.findIndex():[counter=data().counter];if():[().myIndex>-1]:[_.passengers-details.[().myIndex]=data();().myIndex=-1]]]"
            }
          ]
        }
      ]
    }
  ],
  "id": "booking-passenger",
  "type": "View?class=vertical;style:[flex=1]",
  "creation-date": 1655734694974
}